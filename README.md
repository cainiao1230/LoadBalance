# FastAPI负载均衡 技术实现
# 背景意义
目前低空经济发展迅猛，尤其是无人机行业，随着大量无人机的涌现，新的法令法规已经开发逐步实施，对无人机的侦测，打压等技术在慢慢走向成熟，该项目主要解决的业务是反无人机，通过改平台能够获取无人机的经纬度，高度等信息
# 启动命令
uvicorn main:app --host 0.0.0.0 --port 5000
该项目已部署在阿里云
# 解决问题:
用户将收到的大疆无人机数据包发送到解密服务器，一旦客户量增大，需要增加服务器，从而需要进行服务器负载均衡
该项目是用fastapi实现的，redis作为消息队列，请求在消息队列中更具设定的优先级规则进行排队，woker每次都会从队列中拿出优先级最高的请求从而发送到目的服务器。

项目简介：
该项目是一个基于FastAPI的负载均衡系统，旨在处理来自大疆无人机的数据包。通过使用Redis作为消息队列，系统能够根据设定的优先级规则对请求进行排队，并由Worker从队列中取出优先级最高的请求发送到目的服务器。这种设计能够有效地分配服务器资源，提高系统的响应速度和处理能力，特别是在客户量增大的情况下。
# 技术栈
- FastAPI：用于构建高性能的Web API。
- Redis：作为消息队列，管理请求的优先级和排队。
- Uvicorn：作为ASGI服务器，运行FastAPI应用。
- 阿里云：部署服务器，提供稳定的运行环境。
- Python：作为主要编程语言，编写服务器逻辑和Worker处理程序。
# 主要功能
1. 接收无人机数据包：系统能够接收来自大疆无人机的数据包，并将其存储在Redis消息队列中。
2. 优先级排队：根据设定的优先级规则，对请求进行排队，确保高优先级的请求能够优先处理。
3. Worker处理：Worker从消息队列中取出优先级最高的请求，并将其发送到目的服务器进行处理。
4. 负载均衡：通过增加服务器实例，系统能够在客户量增大的情况下进行负载均衡，确保系统的稳定性和高效性。
# 结论
通过使用FastAPI和Redis，我们成功实现了一个高效的负载均衡系统，能够处理大量来自大疆无人机的数据包，并根据优先级规则进行排队和处理。该系统的设计不仅提高了响应速度和处理能力，还为未来的扩展提供了良好的基础，能够适应不断增长的客户需求和数据量。  
